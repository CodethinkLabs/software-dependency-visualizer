# Example data for Software Dependency Explorer prototype
#
# This is JSON-LD represented as YAML.
---

'@context':
  # FIXME: this context should be used by all data! and should
  # be shared somewhere public.

  # Prefix abbreviations
  id: 'http://example.com/shared-lib#'
  sw: 'http://baserock.org/software-integration-ontology#'

  'contains':
      '@id': 'sw:contains'
      '@type': '@id'
  'produces':
      '@id': 'sw:produces'
      '@type': '@id'
  'requires':
      '@id': 'sw:requires'
      '@type': '@id'

  # These 'human-readable' names are not just important here.
  #
  # We use these types as labels in Neo4J. ':' is a special character
  # in the Cypher query language. You can escape using ` characters, but
  # it's an extra pain.
  'Binary': 'sw:Binary'
  'BuildProcess': 'sw:BuildProcess'
  'File': 'sw:File'
  'FileTree': 'sw:FileTree'
  'Intermediate': 'sw:Intermediate'
  'Package': 'sw:Package'
  'Repository': 'sw:Repository'
  'Source': 'sw:Source'

  'name': 'https://schema.org/name'

# A simple shared library

'@graph':
- '@id': 'id:repos/gtk.git/commits/1234'
  '@type': [ 'sw:FileTree' ]
  'name': 'gtk.git commit 1234'
  'contains':
    - '@id': 'id:repos/gtk.git/commits/1234/gtk.h'
      '@type': [ 'sw:File', 'sw:Source' ]
      'name': 'gtk.h'

    - '@id': 'id:repos/gtk.git/commits/1234/gtk.c'
      '@type': [ 'sw:File', 'sw:Source' ]
      'name': 'gtk.c'
      'requires': 'id:repos/gtk.git/commits/1234/gtk.h'

    - '@id': 'id:repos/gtk.git/commits/1234/Makefile'
      '@type': [ 'sw:File', 'sw:Source' ]
      'name': 'Makefile'
      'requires':
          - 'id:repos/gtk.git/commits/1234/gtk.c'
          - 'id:repos/gtk.git/commits/1234/gtk.h'

- '@id': 'id:build-process/gtk'
  '@type': [ 'sw:BuildProcess' ]
  'name': 'Gtk'
  'requires':
      - 'id:repos/gtk.git/commits/1234/gtk.c'
      - 'id:repos/gtk.git/commits/1234/gtk.h'
      - 'id:repos/gtk.git/commits/1234/Makefile'
  'produces':
      - 'id:output/libgtk.so'

- '@id': 'id:build-process/gtk/gtk.o'
  '@type': [ 'sw:Intermediate', 'sw:File' ]
  'name': 'gtk.o'
  'requires':
      - 'id:repos/gtk.git/commits/1234/gtk.c'
      - 'id:repos/gtk.git/commits/1234/gtk.h'

- '@id': 'id:output/libgtk.so'
  '@type': [ 'sw:Binary', 'sw:File' ]
  'name': 'libgtk.so'

# Debian packaging for the simple shared library

- '@id': 'id:repos/gtk-package.git'
  '@type': [ 'sw:Repository' ]
  'name': 'gtk-package.git'
  'contains':
    - '@id': 'id:repos/gtk-package.git/commits/5678/debian/rules'
      '@type': [ 'sw:Source', 'sw:File' ]
      'requires': 'id:repos/gtk.git/commits/1234'

- '@id': 'id:build-process/package/source/libgtk'
  '@type': [ 'sw:BuildProcess' ]
  'name': 'libgtk-src'
  'requires': 'id:repos/gtk-package.git/commits/5678/debian/rules'
  'produces': 'id:package/source/libgtk'

- '@id': 'id:package/source/libgtk'
  '@type': [ 'sw:Source', 'sw:Package' ]
  'contains':
      - 'id:repos/gtk.git/commits/1234/gtk.c'
      - 'id:repos/gtk.git/commits/1234/gtk.h'
      - 'id:repos/gtk.git/commits/1234/Makefile'
      - 'id:repos/gtk-package.git/commits/5678/debian/rules'

- '@id': 'id:build-process/package/binary/libgtk'
  '@type': [ 'sw:BuildProcess' ]
  'name': 'libgtk'
  'requires':
      - 'id:package/source/libgtk'
  'produces':
      - 'id:package/binary/libgtk'

- '@id': 'id:package/binary/libgtk'
  'name': 'libgtk-bin'
  '@type': [ 'sw:Binary', 'sw:Package' ]
  'contains':
      - 'id:output/libgtk.so'
